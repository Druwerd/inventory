#!/usr/bin/env ruby

require 'rubygems'
require 'rest_client'
require 'json'

SERVER_URL = "http://localhost:3000"

hostname = `hostname`.strip
print "Adding #{hostname}..."

begin
  response = RestClient.post "#{SERVER_URL}/servers.json", :server => {:name => hostname}, :content_type => 'application/json', :accept => :json
  puts "done"
  puts response
rescue Exception => e
  puts "error"
  puts e
  exit 1
end
